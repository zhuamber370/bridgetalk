# éœ€æ±‚åˆ†æä¸å®ç°è§„æ ¼ï¼ˆMVPï¼‰

## OpenClaw Agent åŸç”Ÿæ²Ÿé€šå¹³å°

> **ç‰ˆæœ¬**: v1.0 MVP  
> **æ—¥æœŸ**: 2026-02-14  
> **çŠ¶æ€**: äº¤ä»˜ç‰ˆ  
> **ç›®æ ‡è¯»è€…**: Claude Code å¼€å‘è€…

---

## 1. äº§å“ä¸€å¥è¯ä¸è¾¹ç•Œ

### 1.1 ä¸€å¥è¯å®šä¹‰

**ä¸€ä¸ªä»¥èŠå¤©ä¸ºæ ¸å¿ƒã€å·¦ä¾§ä»»åŠ¡åˆ—è¡¨ä¸ºå¯¼èˆªçš„ç§»åŠ¨ç«¯H5/PWAåº”ç”¨ï¼Œç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€æˆ–å¿«æ·æŒ‰é’®å§”æ‰˜ä»»åŠ¡ç»™Agentï¼Œä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸ç»“æœå®æ—¶å›æ˜¾åœ¨å¯¹è¯æµä¸­ï¼Œæ‰€æœ‰æ•°æ®æœ¬åœ°å­˜å‚¨ã€å¯å¯¼å‡º/åˆ é™¤ã€ä¸åŒæ­¥ã€‚**

### 1.2 äº§å“è¾¹ç•Œ

| è¾¹ç•Œç»´åº¦ | èŒƒå›´å†… | èŒƒå›´å¤– |
|----------|--------|--------|
| **å½¢æ€** | ç§»åŠ¨ç«¯H5ã€PWA | åŸç”ŸAppã€æ¡Œé¢å®¢æˆ·ç«¯ |
| **äº¤äº’** | å•äººå¯¹è¯ã€ä»»åŠ¡å§”æ‰˜ | ç¾¤èŠã€å¤šäººåä½œ |
| **å­˜å‚¨** | æœ¬åœ°SQLite/IndexedDBã€å¯¼å‡º/æ“¦é™¤ | äº‘ç«¯åŒæ­¥ã€å¤šè®¾å¤‡å®æ—¶åŒæ­¥ |
| **æ‰§è¡Œ** | åœ¨çº¿æ‰§è¡Œï¼ˆéœ€ç½‘ç»œï¼‰ | ç¦»çº¿æ‰§è¡Œã€æœ¬åœ°æ¨¡å‹ |
| **åç«¯** | OpenClaw Gateway | è‡ªå»ºAgenté›†ç¾¤ |
| **ä»»åŠ¡** | å•ç”¨æˆ·å§”æ‰˜-æ‰§è¡Œé—­ç¯ | å¤æ‚å·¥ä½œæµç¼–æ’ã€å®šæ—¶å¾ªç¯è§„åˆ™ |

---

## 2. ç”¨æˆ·ç”»åƒä¸æ ¸å¿ƒåœºæ™¯

### 2.1 ç”¨æˆ·ç”»åƒï¼šæ™®é€šç”¨æˆ·

| å±æ€§ | æè¿° |
|------|------|
| **èº«ä»½** | çŸ¥è¯†å·¥ä½œè€…ã€è½»åº¦æŠ€æœ¯ç”¨æˆ· |
| **è®¾å¤‡** | æ‰‹æœºä¸ºä¸»ï¼ˆiOS Safari / Android Chromeï¼‰ |
| **åœºæ™¯** | é€šå‹¤ã€ç¢ç‰‡æ—¶é—´ã€ç¡å‰ |
| **èƒ½åŠ›** | ä¼šç”¨ChatGPTç±»å·¥å…·ï¼Œä¸ç†Ÿæ‚‰APIæˆ–è„šæœ¬ |
| **ç—›ç‚¹** | æƒ³æ³•æ•£è½å„å¤„ã€ä»»åŠ¡è¿›åº¦éš¾ä»¥è¿½è¸ªã€æ‰‹æœºæ“ä½œAgentä½“éªŒå·® |
| **æœŸæœ›** | æ‰“å¼€å³ç”¨ã€è¯´å¥è¯å°±èƒ½å§”æ‰˜ã€è¿›å±•è‡ªåŠ¨æ¨ç»™æˆ‘ |

### 2.2 æ ¸å¿ƒåœºæ™¯ï¼ˆ3ä¸ªï¼‰

#### åœºæ™¯Aï¼šç¢ç‰‡æ—¶é—´å¿«é€Ÿå§”æ‰˜
> **ç”¨æˆ·** åœ¨åœ°é“ä¸Šæƒ³èµ·è¦æŸ¥ä¸€ä¸ªå¿«é€’  
> **è¡Œä¸º** æ‰“å¼€App â†’ ç›´æ¥è¾“å…¥"å¸®æˆ‘æŸ¥ä¸€ä¸‹é¡ºä¸°1234567890"  
> **é¢„æœŸ** Agentè‡ªåŠ¨åˆ›å»ºä»»åŠ¡ã€å¼€å§‹æ‰§è¡Œã€å®Œæˆåæ¨é€ç»“æœåˆ°å¯¹è¯

**å…³é”®éªŒæ”¶**: ä»æ‰“å¼€åˆ°å§”æ‰˜å®Œæˆ â‰¤ 3ç§’ï¼Œæ— éœ€æ‰‹åŠ¨åˆ†ç±»æˆ–é€‰æ‹©Agent

#### åœºæ™¯Bï¼šä»»åŠ¡è¿›å±•è¢«åŠ¨æ¥æ”¶
> **ç”¨æˆ·** å·²å§”æ‰˜ä¸€ä¸ªè€—æ—¶ä»»åŠ¡ï¼ˆå¦‚"æ•´ç†è¿™å‘¨çš„ä¼šè®®çºªè¦"ï¼‰  
> **è¡Œä¸º** å…³é—­Appåšå…¶ä»–äº‹  
> **é¢„æœŸ** ä»»åŠ¡æœ‰è¿›å±•æ—¶æ”¶åˆ°ç³»ç»Ÿé€šçŸ¥ï¼Œæ‰“å¼€Appç›´æ¥çœ‹åˆ°ç»“æœå¡ç‰‡

**å…³é”®éªŒæ”¶**: ä»»åŠ¡çŠ¶æ€å˜æ›´ â†’ é€šçŸ¥è§¦å‘ â†’ ç‚¹å‡»é€šçŸ¥ç›´è¾¾å¯¹åº”ä»»åŠ¡å¯¹è¯

#### åœºæ™¯Cï¼šå†å²ä»»åŠ¡è¿½æº¯ä¸å¯¼å‡º
> **ç”¨æˆ·** æƒ³å›é¡¾ä¸Šä¸ªæœˆå§”æ‰˜çš„æ‰€æœ‰ä»»åŠ¡ï¼Œæˆ–æ¸…ç†æ•°æ®  
> **è¡Œä¸º** è¿›å…¥è®¾ç½® â†’ é€‰æ‹©æ—¶é—´èŒƒå›´ â†’ å¯¼å‡ºJSONæˆ–ä¸€é”®æ“¦é™¤

**å…³é”®éªŒæ”¶**: å¯¼å‡ºæ–‡ä»¶åŒ…å«å®Œæ•´ä»»åŠ¡å†å²ä¸æ¶ˆæ¯è®°å½•ï¼Œæ“¦é™¤åæ— æ®‹ç•™

---

## 3. MVPèŒƒå›´

### 3.1 å¿…é¡»å®ç°ï¼ˆMust Haveï¼‰

| æ¨¡å— | åŠŸèƒ½é¡¹ | ä¼˜å…ˆçº§ |
|------|--------|--------|
| **æ¶æ„** | Client / Task Inbox Engine / Adapter ä¸‰å±‚æ‹†åˆ† | P0 |
| **Client** | å·¦ä¾§Tasksåˆ—è¡¨å…¥å£ + å³ä¾§çº¯å¯¹è¯å¸ƒå±€ | P0 |
| **Client** | H5/PWAé€‚é…ï¼Œå•æ‰‹æ“ä½œå‹å¥½ | P0 |
| **Client** | å¼•å¯¼æŒ‰é’®ç»„ï¼ˆâ‰¤3ä¸ªï¼‰+ è‡ªç„¶è¯­è¨€è¾“å…¥å…œåº• | P0 |
| **Client** | ä»»åŠ¡å¡ç‰‡å†…åµŒå¯¹è¯æµ | P0 |
| **Client** | "æ–°ä»»åŠ¡"æŒ‰é’®ï¼ˆæ˜¾å¼åˆ›å»ºå…¥å£ï¼‰ | P0 |
| **Client** | æ•°æ®å¯¼å‡º/åˆ é™¤å…¥å£ | P0 |
| **å¯¹è¯** | æ–‡æœ¬æ¶ˆæ¯æ”¶å‘ã€æ¶ˆæ¯çŠ¶æ€æ˜¾ç¤º | P0 |
| **ä»»åŠ¡** | è‡ªç„¶è¯­è¨€åˆ›å»ºä»»åŠ¡ | P0 |
| **ä»»åŠ¡** | è‡ªåŠ¨ä»»åŠ¡å½’å±ï¼ˆç½®ä¿¡åº¦â‰¥0.7è‡ªåŠ¨ï¼Œå¦åˆ™è¯¢é—®ï¼‰ | P0 |
| **ä»»åŠ¡** | é»˜è®¤å»¶ç»­å½“å‰ä»»åŠ¡ï¼Œæ­§ä¹‰æ‰æç¤ºæ–°ä»»åŠ¡ | P0 |
| **ä»»åŠ¡** | ä»»åŠ¡çŠ¶æ€æµè½¬ï¼šå¾…åŠâ†’è¿›è¡Œä¸­â†’å·²å®Œæˆ/å¤±è´¥ | P0 |
| **ä»»åŠ¡** | ä»»åŠ¡åˆ—è¡¨ç­›é€‰ï¼šå…¨éƒ¨/è¿›è¡Œä¸­/å·²å®Œæˆ | P1 |
| **é€šçŸ¥** | ç³»ç»Ÿçº§é€šçŸ¥ï¼ˆæµè§ˆå™¨Pushæˆ–PWAé€šçŸ¥ï¼‰ | P1 |
| **å­˜å‚¨** | æœ¬åœ°SQLite/IndexedDBï¼Œé›¶äº‘ç«¯ä¾èµ– | P0 |
| **å­˜å‚¨** | JSONæ ¼å¼å¯¼å‡º/å¯¼å…¥ï¼ŒSHA256æ ¡éªŒ | P1 |
| **é€‚é…å±‚** | OpenClaw Adapterå®ç° | P0 |
| **é€‚é…å±‚** | å·¥å…·ç™½åå•ã€é«˜å±æ“ä½œäºŒæ¬¡ç¡®è®¤ | P0 |

### 3.2 ä¸åšï¼ˆWon't Haveï¼‰

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| ç¾¤èŠ/å¤šäººåä½œ | MVPä»…æ”¯æŒå•ç”¨æˆ·ä¸Agentå¯¹è¯ |
| äº‘ç«¯åŒæ­¥ | ä¸åŒæ­¥ï¼Œå„ç«¯ç‹¬ç«‹å­˜å‚¨ |
| ç¦»çº¿æ‰§è¡Œ | éœ€åœ¨çº¿è¿æ¥OpenClaw Gateway |
| è¯­éŸ³æ¶ˆæ¯/è¯­éŸ³è¾“å…¥ | çº¯æ–‡å­—äº¤äº’ |
| å¤æ‚å·¥ä½œæµç¼–æ’ | ä¸æ”¯æŒå¤šæ­¥éª¤å¯è§†åŒ–ç¼–è¾‘å™¨ |
| å®šæ—¶/å¾ªç¯ä»»åŠ¡è§„åˆ™ | ä»…æ”¯æŒå•æ¬¡å§”æ‰˜æ‰§è¡Œ |
| æ–‡ä»¶ç‰ˆæœ¬ç®¡ç† | é™„ä»¶ä»…ä¿ç•™æœ€æ–°ç‰ˆæœ¬ |
| èŠå¤©è®°å½•æœç´¢ | ä»…æ”¯æŒæœ€è¿‘50æ¡æœ¬åœ°æµè§ˆ |
| ç«¯åˆ°ç«¯åŠ å¯† | æœ¬åœ°å­˜å‚¨ä¾èµ–è®¾å¤‡å®‰å…¨ |

---

## 4. å…³é”®äº¤äº’è§„èŒƒ

### 4.1 æ ¸å¿ƒåŸåˆ™

1. **èŠå¤©ä¼˜å…ˆ**: æ‰€æœ‰äº¤äº’å›´ç»•å¯¹è¯æµå±•å¼€ï¼Œå‡å°‘é¡µé¢è·³è½¬
2. **è‡ªåŠ¨ä»»åŠ¡å½’å±**: Agentè‡ªåŠ¨è¯†åˆ«ä»»åŠ¡å½’å±ï¼Œå‡å°‘ç”¨æˆ·å†³ç­–
3. **æŒ‰é’®æ•°é‡â‰¤3**: å¼•å¯¼æŒ‰é’®ç»„æœ€å¤š3ä¸ªï¼Œé¿å…é€‰æ‹©å›°éš¾
4. **è‡ªç„¶è¯­è¨€å…œåº•**: æä¾›æŒ‰é’®é€‰é¡¹ï¼Œä½†ç”¨æˆ·éšæ—¶å¯ç›´æ¥è¾“å…¥
5. **é»˜è®¤å»¶ç»­å½“å‰ä»»åŠ¡**: å¯¹è¯é»˜è®¤å»¶ç»­å½“å‰æ¿€æ´»ä»»åŠ¡ï¼Œæ­§ä¹‰æ—¶æ‰æç¤ºæ–°å»º

### 4.2 è‡ªåŠ¨ä»»åŠ¡å½’å±è§„åˆ™

```
ç”¨æˆ·è¾“å…¥ â†’ æ„å›¾è¯†åˆ« + ç½®ä¿¡åº¦è®¡ç®—
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚
    ç½®ä¿¡åº¦â‰¥0.7      ç½®ä¿¡åº¦<0.7
        â”‚               â”‚
        â†“               â†“
   è‡ªåŠ¨å½’å±å½“å‰      è¯¢é—®ç”¨æˆ·ç¡®è®¤
   æ¿€æ´»ä»»åŠ¡              â”‚
        â”‚               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
          ä»»åŠ¡åˆ›å»º/è¿½åŠ 
```

**è¯¢é—®æ—¶æœº**: ä»…å½“ä»¥ä¸‹æƒ…å†µå‡ºç°æ—¶æ‰æ‰“æ–­ç”¨æˆ·ç¡®è®¤
- ç½®ä¿¡åº¦ < 0.7
- æ£€æµ‹åˆ°æ˜æ˜¾çš„æ–°ä»»åŠ¡æ„å›¾ï¼ˆå¦‚"å¦å¤–ä¸€ä»¶äº‹"ã€"æ–°å»ºä»»åŠ¡"ï¼‰
- ç”¨æˆ·æ˜¾å¼ç‚¹å‡»"æ–°ä»»åŠ¡"æŒ‰é’®

### 4.3 å¼•å¯¼æŒ‰é’®ç»„è§„èŒƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent: éœ€è¦æˆ‘å¸®æ‚¨åšä»€ä¹ˆï¼Ÿ           â”‚
â”‚                                    â”‚
â”‚    [æŸ¥è¯¢å¿«é€’]  [é¢„è®¢é¤å…]  [å…¶ä»–]  â”‚
â”‚                                    â”‚
â”‚    æˆ–ç›´æ¥è¾“å…¥æ‚¨æƒ³åšçš„äº‹...         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| å±æ€§ | è§„èŒƒ |
|------|------|
| **æ•°é‡** | æœ€å¤š3ä¸ªæŒ‰é’® |
| **ä½ç½®** | Agentæ¶ˆæ¯ä¸‹æ–¹ï¼Œå†…è”æ˜¾ç¤º |
| **æ–‡æ¡ˆ** | åŠ¨è¯å¼€å¤´ï¼Œä¸è¶…è¿‡4ä¸ªæ±‰å­— |
| **å…œåº•** | å§‹ç»ˆä¿ç•™è‡ªç„¶è¯­è¨€è¾“å…¥èƒ½åŠ› |
| **æ—¶æ•ˆ** | ç”¨æˆ·å‘é€æ–°æ¶ˆæ¯åï¼Œæ—§æŒ‰é’®ç»„å¤±æ•ˆ |

### 4.4 é»˜è®¤å»¶ç»­å½“å‰ä»»åŠ¡

| åœºæ™¯ | å¤„ç†æ–¹å¼ |
|------|----------|
| ç”¨æˆ·è¿ç»­å¯¹è¯ | é»˜è®¤è¿½åŠ åˆ°å½“å‰æ¿€æ´»ä»»åŠ¡ |
| ç”¨æˆ·è¯´"æŸ¥å®Œäº†"ã€"ä¸‹ä¸€ä¸ª" | æç¤º"æ˜¯å¦åˆ›å»ºæ–°ä»»åŠ¡ï¼Ÿ" |
| ä»»åŠ¡å·²å®Œæˆ/å–æ¶ˆ | ä¸‹ä¸€æ¡è¾“å…¥è§¦å‘"æ–°å»ºä»»åŠ¡ or ç»§ç»­ï¼Ÿ" |
| ç”¨æˆ·ç‚¹å‡»"æ–°ä»»åŠ¡"æŒ‰é’® | ç«‹å³åˆ›å»ºæ–°ä»»åŠ¡ä¼šè¯ |

### 4.5 ç¡®è®¤å¡ç‰‡è§„èŒƒ

éœ€è¦ç”¨æˆ·ç¡®è®¤å¤šå­—æ®µæ“ä½œæ—¶ä½¿ç”¨ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ è¯·ç¡®è®¤ä»»åŠ¡                        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ å†…å®¹: é¢„è®¢åŒ—äº¬-ä¸Šæµ·æœºç¥¨              â”‚
â”‚ æ—¶é—´: 3æœˆ15æ—¥ 14:00                  â”‚
â”‚ é¢„ç®—: Â¥800ä»¥å†…                       â”‚
â”‚                                    â”‚
â”‚ [âœ“ ç¡®è®¤æ‰§è¡Œ]  [âœï¸ ä¿®æ”¹]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- å“åº”æ–¹å¼ï¼šç‚¹å‡»æŒ‰é’® æˆ– è‡ªç„¶è¯­è¨€ï¼ˆ"ç¡®è®¤"ã€"æ”¹åˆ°16å·"ã€"ç®—äº†"ï¼‰
- ä½ç½®ï¼šå†…åµŒäºå¯¹è¯æµï¼Œéå¼¹çª—

---

## 5. ä¿¡æ¯æ¶æ„

### 5.1 é¡µé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¡¶éƒ¨æ : Tasks | å½“å‰ä»»åŠ¡æ ‡é¢˜ | â‹®       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                              â”‚
â”‚  Tasks   â”‚      Chat Area               â”‚
â”‚  ä¾§è¾¹æ    â”‚      å¯¹è¯åŒºåŸŸ                 â”‚
â”‚ (å¯æ”¶èµ·)  â”‚                              â”‚
â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”  â”‚  â”‚ Task Card ä»»åŠ¡å¡ç‰‡   â”‚   â”‚
â”‚  â”‚ğŸ”´  â”‚  â”‚  â”‚ (å†…åµŒäºå¯¹è¯æµ)       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â”‚                              â”‚
â”‚  [+]     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ æ–°ä»»åŠ¡   â”‚  â”‚ Quick Actions        â”‚   â”‚
â”‚ æŒ‰é’®     â”‚  â”‚ [æŒ‰é’®A][æŒ‰é’®B][æŒ‰é’®C]â”‚   â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  ä»»åŠ¡åˆ—è¡¨ â”‚                              â”‚
â”‚  - ä»»åŠ¡A â”‚                              â”‚
â”‚  - ä»»åŠ¡B â”‚                              â”‚
â”‚          â”‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ“] [è¾“å…¥æ¡†...]  [å‘é€]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ç»„ä»¶æ¸…å•

| ç»„ä»¶ | è·¯å¾„/ä½ç½® | è¯´æ˜ |
|------|-----------|------|
| **Tasksä¾§è¾¹æ ** | å·¦ä¾§å›ºå®š/å¯æ”¶èµ· | è¿›è¡Œä¸­ä»»åŠ¡åˆ—è¡¨ã€æ–°ä»»åŠ¡æŒ‰é’® |
| **Chatå¯¹è¯åŒº** | å³ä¾§ä¸»åŒºåŸŸ | æ¶ˆæ¯åˆ—è¡¨ã€ä»»åŠ¡å¡ç‰‡ã€å¼•å¯¼æŒ‰é’® |
| **è¾“å…¥åŒº** | åº•éƒ¨å›ºå®š | è¾“å…¥æ¡†ã€é™„ä»¶ã€å‘é€æŒ‰é’® |
| **Task Card** | å¯¹è¯æµå†…åµŒ | ä»»åŠ¡çŠ¶æ€ã€è¿›å±•ã€æ“ä½œæŒ‰é’® |
| **ç¡®è®¤å¡ç‰‡** | å¯¹è¯æµå†…åµŒ | å¤šå­—æ®µæ“ä½œç¡®è®¤ |
| **è®¾ç½®é¡µ** | `/settings` | å¯¼å‡º/åˆ é™¤ã€ä¸»é¢˜ã€é€šçŸ¥åå¥½ |
| **ä»»åŠ¡è¯¦æƒ…** | åº•éƒ¨Sheet/æµ®å±‚ | ä»»åŠ¡å®Œæ•´ä¿¡æ¯ï¼Œéå…¨å±è·³è½¬ |

### 5.3 å¯¼èˆªé€»è¾‘

```
å¯åŠ¨ â†’ æœ‰è¿›è¡Œä¸­çš„ä»»åŠ¡ï¼Ÿ
       â”‚
    â”Œâ”€â”€â”´â”€â”€â”€â”
    â†“      â†“
   æ˜¯      å¦
    â”‚      â”‚
    â†“      â†“
 æœ€è¿‘æ´»è·ƒä»»åŠ¡å¯¹è¯   ç©ºç™½å¼•å¯¼é¡µ
    â”‚               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
    å·¦ä¾§Taskså…¥å£ â”€â”€â†’ åˆ‡æ¢ä»»åŠ¡
            â”‚
            â†“
    ç‚¹å‡»"æ–°ä»»åŠ¡"æŒ‰é’® â”€â”€â†’ åˆ›å»ºæ–°ä»»åŠ¡
```

### 5.4 æ‰‹åŠ¿ä¸æ“ä½œ

| æ“ä½œ | è¡Œä¸º |
|------|------|
| ç‚¹å‡»å·¦ä¾§Taskså›¾æ ‡ | å±•å¼€/æ”¶èµ·ä»»åŠ¡åˆ—è¡¨ |
| ç‚¹å‡»ä»»åŠ¡é¡¹ | åˆ‡æ¢åˆ°è¯¥ä»»åŠ¡å¯¹è¯ |
| ç‚¹å‡»"+"æ–°ä»»åŠ¡ | åˆ›å»ºæ–°ä»»åŠ¡ï¼Œè¿›å…¥ç©ºç™½å¯¹è¯ |
| å·¦æ»‘æ¶ˆæ¯ | å¼•ç”¨å›å¤ï¼ˆå¯é€‰ï¼‰ |
| ä¸‹æ‹‰å¯¹è¯åŒº | åŠ è½½æ›´å¤šå†å² |
| é•¿æŒ‰ä»»åŠ¡é¡¹ | æ˜¾ç¤ºå¯¼å‡º/åˆ é™¤é€‰é¡¹ |

---

## 6. æ•°æ®æ¨¡å‹ä¸æœ¬åœ°å­˜å‚¨ç­–ç•¥

### 6.1 æ•°æ®æ¨¡å‹

#### Taskï¼ˆä»»åŠ¡ï¼‰

```typescript
interface Task {
  id: string;                    // ULID
  title: string;                 // ä»»åŠ¡æ ‡é¢˜ï¼ˆAIç”Ÿæˆæˆ–ç”¨æˆ·é¦–å¥ï¼‰
  content: string;               // ç”¨æˆ·åŸå§‹è¾“å…¥
  
  // çŠ¶æ€
  status: 'pending' | 'running' | 'completed' | 'failed' | 'cancelled';
  priority: 0 | 1 | 2;           // P0(ç´§æ€¥) / P1(æ™®é€š) / P2(ä½)
  
  // æ—¶é—´
  createdAt: number;             // æ—¶é—´æˆ³ms
  updatedAt: number;
  dueDate?: number;              // æˆªæ­¢æ—¶é—´ï¼ˆå¯é€‰ï¼‰
  completedAt?: number;
  
  // å½’å±
  adapterId: string;             // æ‰§è¡Œé€‚é…å™¨ID
  confidence: number;            // å½’å±ç½®ä¿¡åº¦ 0-1
  intent: string;                // è¯†åˆ«çš„æ„å›¾æ ‡ç­¾
  
  // å…³è”
  messageIds: string[];          // å…³è”çš„æ¶ˆæ¯IDåˆ—è¡¨
  
  // å…ƒæ•°æ®
  metadata: {
    source: 'user' | 'system';
    tags: string[];
    isPinned: boolean;
  };
}
```

#### Messageï¼ˆæ¶ˆæ¯ï¼‰

```typescript
interface Message {
  id: string;                    // ULID
  taskId: string;                // æ‰€å±ä»»åŠ¡ID
  
  // å‘é€è€…
  sender: {
    type: 'user' | 'agent' | 'system';
    id: string;
    name?: string;
  };
  
  // å†…å®¹
  content: string;               // æ–‡æœ¬å†…å®¹
  contentType: 'text' | 'card' | 'task_created' | 'task_update';
  cardData?: CardData;           // å¡ç‰‡æ•°æ®ï¼ˆTaskCardã€ConfirmCardç­‰ï¼‰
  
  // çŠ¶æ€
  status: 'sending' | 'sent' | 'delivered' | 'error';
  
  // æ—¶é—´
  timestamp: number;
  
  // å…³è”
  replyTo?: string;              // å›å¤çš„æ¶ˆæ¯ID
  actions?: Action[];            // æ¶ˆæ¯é™„å¸¦çš„æ“ä½œæŒ‰é’®
}
```

#### Updateï¼ˆä»»åŠ¡æ›´æ–°/äº§ç‰©ï¼‰

```typescript
interface Update {
  id: string;
  taskId: string;
  messageId: string;             // å…³è”æ˜¾ç¤ºçš„æ¶ˆæ¯ID
  
  // å†…å®¹
  type: 'status_change' | 'progress' | 'result' | 'error' | 'log';
  title: string;
  content: string;
  payload?: unknown;             // ç»“æ„åŒ–æ•°æ®
  
  // åª’ä½“
  attachments?: Attachment[];
  
  // æ—¶é—´
  createdAt: number;
}
```

#### Artifactï¼ˆäº§ç‰©æ–‡ä»¶ï¼‰

```typescript
interface Artifact {
  id: string;
  taskId: string;
  updateId?: string;
  
  // æ–‡ä»¶ä¿¡æ¯
  name: string;
  mimeType: string;
  size: number;
  
  // å­˜å‚¨
  data: Blob | string;           // å°æ–‡ä»¶ç›´æ¥å­˜ï¼Œå¤§æ–‡ä»¶å­˜è·¯å¾„
  storagePath?: string;          // æœ¬åœ°å­˜å‚¨è·¯å¾„
  
  // å…ƒæ•°æ®
  createdAt: number;
  checksum: string;              // SHA256æ ¡éªŒ
}
```

### 6.2 æœ¬åœ°å­˜å‚¨ç­–ç•¥

**é€‰å‹**: SQLiteï¼ˆæ¨èï¼‰æˆ– IndexedDB

```typescript
// å­˜å‚¨æŠ½è±¡æ¥å£ï¼ˆä¸éœ€è¦çœŸå®å®ç°ï¼‰
interface IStorage {
  // Taskæ“ä½œ
  createTask(task: Task): Promise<Task>;
  getTask(id: string): Promise<Task | null>;
  updateTask(id: string, patches: Partial<Task>): Promise<Task>;
  deleteTask(id: string): Promise<void>;
  listTasks(options: ListOptions): Promise<Task[]>;
  
  // Messageæ“ä½œ
  createMessage(message: Message): Promise<Message>;
  getMessage(id: string): Promise<Message | null>;
  listMessages(taskId: string, options: ListOptions): Promise<Message[]>;
  
  // Updateæ“ä½œ
  createUpdate(update: Update): Promise<Update>;
  listUpdates(taskId: string): Promise<Update[]>;
  
  // Artifactæ“ä½œ
  saveArtifact(artifact: Artifact): Promise<Artifact>;
  getArtifact(id: string): Promise<Artifact | null>;
  deleteArtifact(id: string): Promise<void>;
  
  // å¯¼å‡º/å¯¼å…¥
  exportAll(): Promise<ExportData>;
  importAll(data: ExportData): Promise<void>;
  wipeAll(): Promise<void>;
  
  // å·¥å…·
  close(): Promise<void>;
}

// å¯¼å‡ºæ•°æ®ç»“æ„
interface ExportData {
  version: string;               // "1.0"
  exportedAt: number;
  checksum: string;              // æ•´ä½“SHA256
  tasks: Task[];
  messages: Message[];
  updates: Update[];
  artifacts: Artifact[];
}
```

**å­˜å‚¨é…ç½®ï¼ˆSQLiteï¼‰**:

```typescript
const DB_CONFIG = {
  name: 'agent_communication.db',
  version: 1,
  encryption: true,              // SQLCipheråŠ å¯†
  tables: [
    {
      name: 'tasks',
      primaryKey: 'id',
      indexes: ['status', 'updatedAt', 'adapterId']
    },
    {
      name: 'messages',
      primaryKey: 'id',
      indexes: ['taskId', 'timestamp']
    },
    {
      name: 'updates',
      primaryKey: 'id',
      indexes: ['taskId', 'createdAt']
    },
    {
      name: 'artifacts',
      primaryKey: 'id',
      indexes: ['taskId']
    }
  ]
};
```

**æ•°æ®ä¿ç•™ç­–ç•¥**:
- ä»»åŠ¡è®°å½•ä¿ç•™90å¤©
- å·²åˆ é™¤ä»»åŠ¡è½¯åˆ é™¤ï¼Œ30å¤©åç‰©ç†æ¸…ç†
- å¯¼å‡ºæ–‡ä»¶å¯é€‰AES-256åŠ å¯†
- æ“¦é™¤æ“ä½œè¦†ç›–å†™å…¥ååˆ é™¤

---

## 7. æœåŠ¡ç«¯æ¨¡å—æ‹†åˆ†

### 7.1 ä¸‰å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Client (H5/PWA)                       â”‚
â”‚  - UIæ¸²æŸ“ã€æœ¬åœ°å­˜å‚¨ã€SSEè¿æ¥ç®¡ç†ã€é€šçŸ¥æ¨é€                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ HTTP + SSE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Task Inbox Engine (Node/Python)                 â”‚
â”‚  - ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€æ„å›¾è·¯ç”±ã€çŠ¶æ€æœºã€å¯¼å‡º/å¯¼å…¥              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Protocol + Adapter (OpenClaw)                     â”‚
â”‚  - OpenClaw Gatewayé€šä¿¡ã€å·¥å…·ç™½åå•ã€å®‰å…¨ç¡®è®¤ã€æ‰§è¡Œæµè½¬æ¢    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 Client èŒè´£

| æ¨¡å— | èŒè´£ |
|------|------|
| **UI Layer** | ç»„ä»¶æ¸²æŸ“ã€å¸ƒå±€ç®¡ç†ã€æ‰‹åŠ¿äº¤äº’ |
| **State Manager** | æœ¬åœ°çŠ¶æ€ç®¡ç†ã€ä¸æœåŠ¡ç«¯çŠ¶æ€åŒæ­¥ |
| **Storage Engine** | SQLite/IndexedDBå°è£…ã€CRUDæ“ä½œ |
| **SSE Client** | è¿æ¥ç®¡ç†ã€æ–­çº¿é‡è¿ã€äº‹ä»¶åˆ†å‘ |
| **Notification** | æµè§ˆå™¨Pushé€šçŸ¥ã€è§’æ ‡æ›´æ–° |
| **Export/Import** | æ–‡ä»¶å¯¼å‡ºã€å¯¼å…¥æ ¡éªŒã€æ•°æ®æ“¦é™¤ |

### 7.3 Task Inbox Engine èŒè´£

| æ¨¡å— | èŒè´£ |
|------|------|
| **Task Manager** | ä»»åŠ¡CRUDã€çŠ¶æ€æœºæµè½¬ã€ç”Ÿå‘½å‘¨æœŸç®¡ç† |
| **Intent Router** | æ„å›¾è¯†åˆ«ã€é€‚é…å™¨åŒ¹é…ã€ç½®ä¿¡åº¦è®¡ç®— |
| **Message Hub** | æ¶ˆæ¯æŒä¹…åŒ–ã€å†å²æŸ¥è¯¢ã€äº‹ä»¶å…³è” |
| **Event Broadcaster** | SSEäº‹ä»¶æ¨é€ã€è®¢é˜…ç®¡ç† |
| **Export Manager** | æ•°æ®å¯¼å‡ºã€å¯¼å…¥ã€æ ¡éªŒã€æ“¦é™¤ |
| **Adapter Registry** | é€‚é…å™¨æ³¨å†Œã€å¥åº·æ£€æŸ¥ã€è´Ÿè½½å‡è¡¡ |

### 7.4 Protocol + Adapter (OpenClaw) èŒè´£

| æ¨¡å— | èŒè´£ |
|------|------|
| **OpenClaw Client** | Gatewayè¿æ¥ã€ä¼šè¯ç®¡ç†ã€è®¤è¯ |
| **Tool Whitelist** | å…è®¸çš„å·¥å…·åˆ—è¡¨ã€æƒé™æ ¡éªŒ |
| **Safety Check** | é«˜å±å‘½ä»¤è¯†åˆ«ã€äºŒæ¬¡ç¡®è®¤è§¦å‘ |
| **Execution Mapper** | ä»»åŠ¡â†’OpenClawè°ƒç”¨æ˜ å°„ã€å‚æ•°è½¬æ¢ |
| **Stream Handler** | æ‰§è¡Œæµæ¥æ”¶ã€äº‹ä»¶è½¬æ¢ã€é”™è¯¯å¤„ç† |
| **Result Formatter** | æ‰§è¡Œç»“æœæ ¼å¼åŒ–ã€å¡ç‰‡ç”Ÿæˆ |

---

## 8. APIè§„æ ¼ï¼ˆHTTP + SSEï¼‰

### 8.1 HTTPç«¯ç‚¹

#### ä»»åŠ¡ç®¡ç†

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| POST | `/api/v1/tasks` | åˆ›å»ºä»»åŠ¡ |
| GET | `/api/v1/tasks` | æŸ¥è¯¢ä»»åŠ¡åˆ—è¡¨ |
| GET | `/api/v1/tasks/:id` | è·å–ä»»åŠ¡è¯¦æƒ… |
| POST | `/api/v1/tasks/:id/cancel` | å–æ¶ˆä»»åŠ¡ |
| DELETE | `/api/v1/tasks/:id` | åˆ é™¤ä»»åŠ¡ï¼ˆè½¯åˆ é™¤ï¼‰ |
| POST | `/api/v1/tasks/:id/retry` | é‡è¯•å¤±è´¥ä»»åŠ¡ |

#### æ¶ˆæ¯

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| POST | `/api/v1/tasks/:id/messages` | å‘é€æ¶ˆæ¯ |
| GET | `/api/v1/tasks/:id/messages` | è·å–æ¶ˆæ¯å†å² |

#### æ•°æ®ç®¡ç†

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| POST | `/api/v1/export` | å¯¼å‡ºæ‰€æœ‰æ•°æ® |
| POST | `/api/v1/import` | å¯¼å…¥æ•°æ® |
| DELETE | `/api/v1/data/wipe` | æ“¦é™¤æ‰€æœ‰æ•°æ® |

#### é€‚é…å™¨

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| GET | `/api/v1/adapters` | åˆ—å‡ºå¯ç”¨é€‚é…å™¨ |
| GET | `/api/v1/adapters/:id/health` | é€‚é…å™¨å¥åº·æ£€æŸ¥ |

### 8.2 è¯·æ±‚/å“åº”ç¤ºä¾‹

#### åˆ›å»ºä»»åŠ¡

**è¯·æ±‚**:
```json
POST /api/v1/tasks
Content-Type: application/json

{
  "content": "å¸®æˆ‘æŸ¥ä¸€ä¸‹é¡ºä¸°å¿«é€’1234567890",
  "context": {
    "previousTaskId": "task_xxx",  // å¯é€‰ï¼Œç”¨äºå»¶ç»­ä¸Šä¸‹æ–‡
    "source": "user"
  }
}
```

**å“åº”** (201 Created):
```json
{
  "id": "task_abc123",
  "title": "æŸ¥è¯¢é¡ºä¸°å¿«é€’",
  "content": "å¸®æˆ‘æŸ¥ä¸€ä¸‹é¡ºä¸°å¿«é€’1234567890",
  "status": "pending",
  "confidence": 0.85,
  "adapterId": "openclaw",
  "intent": "express_tracking",
  "createdAt": 1739512800000,
  "actions": [
    {
      "type": "confirm",
      "label": "ç¡®è®¤æ‰§è¡Œ",
      "payload": { "action": "execute" }
    },
    {
      "type": "modify",
      "label": "ä¿®æ”¹",
      "payload": { "action": "edit" }
    }
  ]
}
```

#### è·å–ä»»åŠ¡åˆ—è¡¨

**è¯·æ±‚**:
```json
GET /api/v1/tasks?status=running,pending&limit=20&offset=0
```

**å“åº”**:
```json
{
  "items": [
    {
      "id": "task_abc123",
      "title": "æŸ¥è¯¢é¡ºä¸°å¿«é€’",
      "status": "running",
      "priority": 1,
      "updatedAt": 1739512900000,
      "unreadCount": 2
    }
  ],
  "total": 15,
  "hasMore": false
}
```

#### å‘é€æ¶ˆæ¯

**è¯·æ±‚**:
```json
POST /api/v1/tasks/task_abc123/messages
Content-Type: application/json

{
  "content": "ç¡®è®¤æ‰§è¡Œ",
  "contentType": "text",
  "replyTo": "msg_prev123"  // å¯é€‰
}
```

**å“åº”** (202 Accepted):
```json
{
  "id": "msg_new456",
  "taskId": "task_abc123",
  "sender": {
    "type": "user",
    "id": "user_self"
  },
  "content": "ç¡®è®¤æ‰§è¡Œ",
  "status": "sending",
  "timestamp": 1739513000000
}
```

#### å¯¼å‡ºæ•°æ®

**è¯·æ±‚**:
```json
POST /api/v1/export
Content-Type: application/json

{
  "startDate": 1736920800000,
  "endDate": 1739512800000,
  "encrypt": true,
  "password": "user_password"
}
```

**å“åº”**:
```json
{
  "downloadUrl": "/api/v1/export/download/export_xxx.json.enc",
  "expiresAt": 1739516400000,
  "checksum": "sha256:abc123..."
}
```

### 8.3 SSEç«¯ç‚¹

| ç«¯ç‚¹ | æè¿° |
|------|------|
| `/api/v1/events` | å…¨å±€äº‹ä»¶æµï¼ˆä»»åŠ¡çŠ¶æ€å˜æ›´ã€ç³»ç»Ÿé€šçŸ¥ï¼‰ |
| `/api/v1/tasks/:id/events` | å•ä»»åŠ¡äº‹ä»¶æµï¼ˆæ‰§è¡Œæ—¥å¿—ã€ä¸­é—´ç»“æœï¼‰ |

#### SSEäº‹ä»¶æ ¼å¼

```
event: task.updated
id: evt_789
data: {"taskId":"task_abc123","status":"running","timestamp":1739513100000}

event: message.created
id: evt_790
data: {"taskId":"task_abc123","messageId":"msg_agent789","sender":"agent","content":"æ­£åœ¨æŸ¥è¯¢..."}

event: task.completed
id: evt_791
data: {"taskId":"task_abc123","status":"completed","result":{"tracking":"å·²åˆ°è¾¾åŒ—äº¬è½¬è¿ä¸­å¿ƒ"}}
```

#### æ–­ç‚¹ç»­ä¼ 

Clienté€šè¿‡`Last-Event-ID`å¤´è¯·æ±‚æ–­ç‚¹ç»­ä¼ ï¼š

```
GET /api/v1/events
Last-Event-ID: evt_789
```

### 8.4 Actions/Choices æœºåˆ¶

æ¶ˆæ¯å¯ä»¥é™„å¸¦å¯æ‰§è¡Œçš„åŠ¨ä½œï¼Œç”¨äºå¼•å¯¼ç”¨æˆ·äº¤äº’ï¼š

```typescript
interface Action {
  type: 'button' | 'choice' | 'confirm' | 'link';
  id: string;
  label: string;
  style?: 'primary' | 'secondary' | 'danger';
  payload: unknown;              // ç‚¹å‡»åå›ä¼ çš„ä¸Šä¸‹æ–‡
}

interface Message {
  // ...å…¶ä»–å­—æ®µ
  actions?: Action[];
}
```

**ç¤ºä¾‹**ï¼šç¡®è®¤å¡ç‰‡æ¶ˆæ¯

```json
{
  "id": "msg_confirm001",
  "taskId": "task_abc123",
  "sender": { "type": "agent", "id": "agent_main" },
  "contentType": "card",
  "cardData": {
    "type": "confirm",
    "title": "ä»»åŠ¡ç¡®è®¤",
    "fields": [
      { "label": "å†…å®¹", "value": "é¢„è®¢åŒ—äº¬-ä¸Šæµ·æœºç¥¨" },
      { "label": "æ—¶é—´", "value": "3æœˆ15æ—¥ 14:00" }
    ]
  },
  "actions": [
    {
      "type": "confirm",
      "id": "act_confirm",
      "label": "ç¡®è®¤æ‰§è¡Œ",
      "style": "primary",
      "payload": { "confirmed": true }
    },
    {
      "type": "button",
      "id": "act_modify",
      "label": "ä¿®æ”¹",
      "style": "secondary",
      "payload": { "action": "edit_request" }
    }
  ]
}
```

ç”¨æˆ·å“åº”æ–¹å¼ï¼š
1. ç‚¹å‡»æŒ‰é’® â†’ Clientå‘é€`{"actionId": "act_confirm"}`
2. è‡ªç„¶è¯­è¨€è¾“å…¥ â†’ NLPåŒ¹é…åˆ°æ„å›¾ï¼Œç­‰æ•ˆäºç‚¹å‡»

---

## 9. OpenClaw Adapter æ–¹æ¡ˆ

### 9.1 æ¶æ„ä½ç½®

```
Task Inbox Engine â†’ OpenClaw Adapter â†’ OpenClaw Gateway
                          â”‚
                    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
                    â†“           â†“
              æ„å›¾åŒ¹é…      æ‰§è¡Œæ˜ å°„
              å·¥å…·ç™½åå•    å®‰å…¨ç¡®è®¤
```

### 9.2 ä»»åŠ¡è¯·æ±‚æ˜ å°„

#### æ„å›¾è¯†åˆ«

```typescript
// è½»é‡çº§å…³é”®è¯ + è§„åˆ™åŒ¹é…
const INTENT_PATTERNS = [
  {
    intent: 'file_operation',
    keywords: ['æ–‡ä»¶', 'è¯»å–', 'å†™å…¥', 'ä¿®æ”¹', 'åˆ›å»º'],
    tools: ['read', 'write', 'edit'],
    confidenceBoost: 0.3
  },
  {
    intent: 'command_execution',
    keywords: ['æ‰§è¡Œ', 'è¿è¡Œ', 'shell', 'å‘½ä»¤', 'git'],
    tools: ['exec'],
    confidenceBoost: 0.3
  },
  {
    intent: 'web_search',
    keywords: ['æœç´¢', 'æŸ¥è¯¢', 'æŸ¥ä¸€ä¸‹', 'æ‰¾æ‰¾'],
    tools: ['web_search', 'web_fetch'],
    confidenceBoost: 0.2
  }
];

function scoreIntent(content: string): IntentScore {
  let maxScore = 0;
  let matchedIntent = 'general';
  
  for (const pattern of INTENT_PATTERNS) {
    const matchCount = pattern.keywords.filter(kw => 
      content.includes(kw)
    ).length;
    const score = (matchCount / pattern.keywords.length) * 
                  (1 + pattern.confidenceBoost);
    
    if (score > maxScore) {
      maxScore = score;
      matchedIntent = pattern.intent;
    }
  }
  
  return {
    matched: maxScore > 0.3,
    confidence: Math.min(maxScore, 0.95),
    intent: matchedIntent
  };
}
```

#### ä»»åŠ¡åˆ°OpenClawè°ƒç”¨æ˜ å°„

```typescript
interface TaskToOpenClawMapping {
  // ä»»åŠ¡è§£æ
  parseTask(task: Task): OpenClawRequest;
  
  // å·¥å…·é€‰æ‹©
  selectTool(intent: string): string;
  
  // å‚æ•°æ„é€ 
  buildParams(task: Task, tool: string): ToolParams;
}

// ç¤ºä¾‹ï¼šæŸ¥è¯¢å¿«é€’ä»»åŠ¡ â†’ web_search + web_fetch
function parseExpressTracking(task: Task): OpenClawRequest {
  const trackingNumber = extractTrackingNumber(task.content);
  
  return {
    sessionType: 'single_turn',  // æˆ– 'persistent' å¤šè½®
    tools: ['web_search', 'web_fetch'],
    prompt: `æŸ¥è¯¢é¡ºä¸°å¿«é€’ ${trackingNumber} çš„æœ€æ–°ç‰©æµçŠ¶æ€`,
    context: {
      expectedFormat: 'ç‰©æµçŠ¶æ€ã€å½“å‰ä½ç½®ã€é¢„è®¡é€è¾¾æ—¶é—´',
      fallbackAction: 'å¦‚æŸ¥è¯¢å¤±è´¥ï¼Œæç¤ºç”¨æˆ·æ£€æŸ¥å•å·'
    }
  };
}

// ç¤ºä¾‹ï¼šæ–‡ä»¶æ“ä½œä»»åŠ¡ â†’ read/write/edit
function parseFileOperation(task: Task): OpenClawRequest {
  return {
    sessionType: 'persistent',  // æ–‡ä»¶æ“ä½œå¯èƒ½éœ€è¦å¤šè½®
    tools: ['read', 'write', 'edit'],
    prompt: task.content,
    workdir: task.metadata?.cwd || '.',
    constraints: {
      allowedPaths: ['/workspace/*', '/tmp/*'],  // è·¯å¾„é™åˆ¶
      maxFileSize: '10MB'
    }
  };
}
```

### 9.3 ä¼šè¯/æ‰§è¡Œ/å›ä¼ æµç¨‹

```
1. ä»»åŠ¡åˆ›å»º
   Task Inbox Engine åˆ›å»ºä»»åŠ¡ï¼ŒçŠ¶æ€ï¼špending
            â”‚
            â–¼
2. æ„å›¾åŒ¹é…
   Adapter.scoreIntent() è®¡ç®—ç½®ä¿¡åº¦
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
    â–¼               â–¼
 ç½®ä¿¡åº¦â‰¥0.7      ç½®ä¿¡åº¦<0.7
    â”‚               â”‚
    â–¼               â–¼
 è‡ªåŠ¨è·¯ç”±      è¿”å›ç¡®è®¤å¡ç‰‡
    â”‚         ç­‰å¾…ç”¨æˆ·å“åº”
    â–¼               â”‚
3. æ‰§è¡Œè¯·æ±‚          â–¼
   Adapter æ„é€     ç”¨æˆ·ç¡®è®¤å
   OpenClawè¯·æ±‚      ç»§ç»­æ‰§è¡Œ
            â”‚
            â–¼
4. OpenClawè°ƒç”¨
   POST /v1/sessions
   æˆ– Gateway RPC
            â”‚
            â–¼
5. æµå¼æ‰§è¡Œ
   æ¥æ”¶ SSE/Stream
   è¾“å‡ºå®æ—¶å›ä¼ 
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
    â–¼               â–¼
  æ‰§è¡Œæ—¥å¿—      æœ€ç»ˆç»“æœ
    â”‚               â”‚
    â–¼               â–¼
6. äº‹ä»¶è½¬æ¢    ç»“æœæ ¼å¼åŒ–
   è½¬ä¸ºå†…éƒ¨    ç”ŸæˆUpdate
   Updateäº‹ä»¶      â”‚
    â”‚               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â–¼
7. æ¨é€Client
   SSEå¹¿æ’­
   Clientæ›´æ–°UI
```

### 9.4 å·¥å…·ç™½åå•

```typescript
// å…è®¸çš„å·¥å…·åˆ—è¡¨
const ALLOWED_TOOLS = [
  // æ–‡ä»¶æ“ä½œ
  'read',
  'write', 
  'edit',
  
  // æ‰§è¡Œ
  'exec',
  
  // Web
  'web_search',
  'web_fetch',
  
  // ç³»ç»Ÿ
  'browser',
  
  // æ¶ˆæ¯ï¼ˆå—é™ï¼‰
  'message'  // ä»…å…è®¸å‘é€ç»™å½“å‰ç”¨æˆ·çš„æ¶ˆæ¯
];

// ç¦æ­¢çš„å·¥å…·
const BLOCKED_TOOLS = [
  'nodes',      // è®¾å¤‡æ§åˆ¶
  'canvas',     // ç”»å¸ƒæ§åˆ¶
  'feishu_doc', // é£ä¹¦æ–‡æ¡£ï¼ˆæ•æ„Ÿï¼‰
  // ä»»ä½•æœªåœ¨ç™½åå•çš„å·¥å…·
];

function validateToolCall(toolCall: unknown): ValidationResult {
  const tc = toolCall as { tool: string; params?: unknown };
  
  if (!ALLOWED_TOOLS.includes(tc.tool)) {
    return {
      valid: false,
      reason: `Tool "${tc.tool}" is not in allowlist`
    };
  }
  
  // é¢å¤–å‚æ•°æ ¡éªŒ
  if (tc.tool === 'write' || tc.tool === 'edit') {
    const path = (tc.params as any)?.path || '';
    if (!isPathAllowed(path)) {
      return {
        valid: false,
        reason: 'Path not allowed'
      };
    }
  }
  
  return { valid: true };
}
```

### 9.5 å®‰å…¨ç¡®è®¤æœºåˆ¶

```typescript
// é«˜å±å‘½ä»¤æ¨¡å¼
const DANGEROUS_PATTERNS = [
  /rm\s+-rf/i,           // å¼ºåˆ¶åˆ é™¤
  />:\s*\/dev\/null/,    // è¦†ç›–è®¾å¤‡
  /dd\s+if=/i,           // ç£ç›˜æ“ä½œ
  /mkfs/i,               // æ ¼å¼åŒ–
  /curl.*\|.*sh/i,       // ç®¡é“æ‰§è¡Œ
  /wget.*\|.*sh/i
];

function isDangerousCommand(command: string): boolean {
  return DANGEROUS_PATTERNS.some(p => p.test(command));
}

// äºŒæ¬¡ç¡®è®¤è§¦å‘
function checkRequiresConfirmation(
  tool: string, 
  params: unknown
): ConfirmationCheck {
  // æ‰€æœ‰execå‘½ä»¤éƒ½æ£€æŸ¥
  if (tool === 'exec') {
    const command = (params as any).command || '';
    
    if (isDangerousCommand(command)) {
      return {
        requiresConfirmation: true,
        level: 'danger',
        reason: 'æ£€æµ‹åˆ°é«˜å±æ“ä½œ',
        detail: 'è¯¥å‘½ä»¤å¯èƒ½ä¼šåˆ é™¤æˆ–æŸåæ•°æ®'
      };
    }
    
    // å½±å“èŒƒå›´å¤§çš„æ“ä½œ
    if (command.includes('sudo') || command.includes('systemctl')) {
      return {
        requiresConfirmation: true,
        level: 'warning',
        reason: 'éœ€è¦ç³»ç»Ÿçº§æƒé™',
        detail: 'è¯¥å‘½ä»¤å¯èƒ½å½±å“ç³»ç»Ÿè¿è¡Œ'
      };
    }
  }
  
  // write/edit è¦†ç›–å·²æœ‰æ–‡ä»¶
  if (tool === 'write' || tool === 'edit') {
    const path = (params as any).path || '';
    // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
    if (fileExists(path)) {
      return {
        requiresConfirmation: true,
        level: 'warning',
        reason: 'æ–‡ä»¶å·²å­˜åœ¨',
        detail: `å°†è¦†ç›–ç°æœ‰æ–‡ä»¶: ${path}`
      };
    }
  }
  
  return { requiresConfirmation: false };
}
```

### 9.6 ä»Mockè¿ç§»æ­¥éª¤

#### Step 1: å®ç°OpenClaw Adapter

```typescript
// adapters/openclaw.adapter.ts
export class OpenClawAdapter implements Adapter {
  id = 'openclaw';
  name = 'OpenClaw Gateway';
  version = '1.0.0';
  
  private client: OpenClawClient;
  
  constructor(config: OpenClawConfig) {
    this.client = new OpenClawClient({
      baseUrl: config.gatewayUrl,
      token: config.gatewayToken,
      timeout: config.timeoutMs || 300000
    });
  }
  
  async scoreIntent(content: string): Promise<IntentScore> {
    // å¤ç”¨ä¸Šé¢çš„scoreIntentå®ç°
    return scoreIntent(content);
  }
  
  async execute(
    task: Task, 
    context: Context
  ): AsyncGenerator<ExecutionEvent> {
    // 1. è§£æä»»åŠ¡ä¸ºOpenClawè¯·æ±‚
    const request = this.parseTask(task);
    
    // 2. åˆ›å»ºOpenClawä¼šè¯
    const session = await this.client.createSession({
      command: request.prompt,
      workdir: request.workdir,
      tools: request.tools
    });
    
    // 3. æµå¼æ¥æ”¶è¾“å‡º
    for await (const chunk of session.stream()) {
      yield {
        type: chunk.type,  // 'log' | 'result' | 'error'
        timestamp: Date.now(),
        data: chunk.data
      };
    }
    
    // 4. æœ€ç»ˆç»“æœ
    const result = await session.getResult();
    yield {
      type: 'final_result',
      timestamp: Date.now(),
      data: {
        exitCode: result.exitCode,
        output: result.output,
        artifacts: result.artifacts
      }
    };
  }
  
  async cancel(taskId: string): Promise<void> {
    await this.client.cancelSession(taskId);
  }
  
  async health(): Promise<HealthStatus> {
    try {
      await this.client.ping();
      return { status: 'healthy' };
    } catch {
      return { status: 'unavailable' };
    }
  }
}
```

#### Step 2: é…ç½®åˆ‡æ¢

```yaml
# config.yaml
adapters:
  mock:
    enabled: false
    type: mock
    delay: 2000
    
  openclaw:
    enabled: true
    type: openclaw
    gatewayUrl: "${OPENCLAW_GATEWAY_URL}"
    gatewayToken: "${OPENCLAW_GATEWAY_TOKEN}"
    timeoutMs: 300000
    
# ç‰¹æ€§å¼€å…³
features:
  useRealExecution: true
  dangerousToolsEnabled: false  # ç”Ÿäº§ç¯å¢ƒé»˜è®¤å…³é—­
  confirmationBypass: false     # å¿…é¡»ç¡®è®¤
```

#### Step 3: å·¥å…·ç™½åå•é…ç½®

```yaml
# tools.yaml
allowed_tools:
  - read
  - write
  - edit
  - exec
  - web_search
  - web_fetch
  - browser
  
exec_safety:
  blocked_patterns:
    - "rm -rf"
    - "mkfs"
    - "dd if="
  require_confirmation_for:
    - "sudo"
    - "systemctl"
    - ">/dev"
```

#### Step 4: éªŒè¯æ¸…å•

```markdown
## OpenClawé›†æˆéªŒè¯æ¸…å•

### è¿æ¥éªŒè¯
- [ ] Gatewayå¥åº·æ£€æŸ¥é€šè¿‡
- [ ] è®¤è¯Tokenæœ‰æ•ˆ
- [ ] SSEè¿æ¥å»ºç«‹æˆåŠŸ

### åŸºç¡€æ‰§è¡Œ
- [ ] ç®€å•echoå‘½ä»¤æ‰§è¡ŒæˆåŠŸ
- [ ] è¾“å‡ºå®æ—¶æµå¼å›ä¼ 
- [ ] é•¿æ—¶é—´ä»»åŠ¡(>1åˆ†é’Ÿ)è¿æ¥ä¿æŒ
- [ ] ä»»åŠ¡å–æ¶ˆä¿¡å·æ­£ç¡®ä¼ é€’

### æ–‡ä»¶æ“ä½œ
- [ ] readå·¥å…·è¯»å–æ–‡ä»¶æˆåŠŸ
- [ ] writeå·¥å…·åˆ›å»ºæ–‡ä»¶æˆåŠŸ
- [ ] editå·¥å…·ä¿®æ”¹æ–‡ä»¶æˆåŠŸ
- [ ] è·¯å¾„é™åˆ¶ç”Ÿæ•ˆï¼ˆè¶…å‡ºèŒƒå›´æ‹’ç»ï¼‰

### Webå·¥å…·
- [ ] web_searchæ‰§è¡ŒæˆåŠŸ
- [ ] web_fetchæŠ“å–æˆåŠŸ

### å®‰å…¨ç¡®è®¤
- [ ] é«˜å±å‘½ä»¤è§¦å‘äºŒæ¬¡ç¡®è®¤
- [ ] è¶Šæƒå·¥å…·è°ƒç”¨è¢«æ‹¦æˆª
- [ ] ç”¨æˆ·æ‹’ç»åä»»åŠ¡æ­£ç¡®å–æ¶ˆ

### æ•°æ®æµ
- [ ] æ‰§è¡Œæ—¥å¿—æ­£ç¡®æ ¼å¼åŒ–
- [ ] æœ€ç»ˆç»“æœæ­£ç¡®å±•ç¤º
- [ ] é”™è¯¯ä¿¡æ¯å‹å¥½å±•ç¤º

### å›æ»šéªŒè¯
- [ ] ç‰¹æ€§å¼€å…³å…³é—­åå›é€€åˆ°Mock
- [ ] Mockæ¨¡å¼åŠŸèƒ½æ­£å¸¸
```

#### è¿ç§»æ—¶é—´é¢„ä¼°

| é˜¶æ®µ | å·¥ä½œé‡ | è¯´æ˜ |
|------|--------|------|
| Adapterå®ç° | 1äººæ—¥ | åŸºäºç°æœ‰æ¨¡æ¿ |
| é…ç½®ä¸å¼€å…³ | 0.5äººæ—¥ | ç¯å¢ƒå˜é‡ç®¡ç† |
| å®‰å…¨åŠ å›º | 0.5äººæ—¥ | ç™½åå•ã€ç¡®è®¤æœºåˆ¶ |
| é›†æˆæµ‹è¯• | 0.5äººæ—¥ | éªŒè¯æ¸…å• |
| **æ€»è®¡** | **2.5äººæ—¥** | å•äººå¯å®Œæˆ |

---

## 10. éªŒæ”¶æ ‡å‡†

### 10.1 å¯é‡åŒ–æŒ‡æ ‡

#### åŠŸèƒ½æ€§æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹å¼ |
|------|--------|----------|
| ç§»åŠ¨ç«¯åŠŸèƒ½è¦†ç›–ç‡ | 100% | æ‰€æœ‰P0åŠŸèƒ½åœ¨iOS Safari/Android Chromeå¯ç”¨ |
| é¡µé¢é¦–å±åŠ è½½æ—¶é—´ | < 2s | Lighthouse TTI |
| äº¤äº’å“åº”æ—¶é—´ | < 100ms | ç‚¹å‡»åˆ°UIåé¦ˆ |
| Agenté¦–å­—å“åº”æ—¶é—´ | < 3s | ç”¨æˆ·å‘é€åˆ°Agenté¦–æ¡æ¶ˆæ¯ |
| ä»»åŠ¡åˆ›å»ºæ­¥æ•° | â‰¤ 2æ­¥ | è¾“å…¥â†’ç¡®è®¤ï¼ˆå¯é€‰ï¼‰â†’å®Œæˆ |
| å•æ‰‹æ“ä½œè¦†ç›–ç‡ | â‰¥ 90% | æ ¸å¿ƒåŠŸèƒ½åœ¨æ‹‡æŒ‡å¯è¾¾åŒºåŸŸ |

#### ä½“éªŒæ€§æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹å¼ |
|------|--------|----------|
| è‡ªåŠ¨å½’å±å‡†ç¡®ç‡ | â‰¥ 85% | ç½®ä¿¡åº¦â‰¥0.7ä¸”æ— éœ€ç”¨æˆ·çº æ­£çš„æ¯”ä¾‹ |
| å¼•å¯¼æŒ‰é’®ç‚¹å‡»ç‡ | â‰¥ 40% | ä½¿ç”¨å¿«æ·æŒ‰é’®çš„ç”¨æˆ·å æ¯” |
| è‡ªç„¶è¯­è¨€å…œåº•ä½¿ç”¨ç‡ | 20%-30% | ç›´æ¥è¾“å…¥ç»•è¿‡æŒ‰é’®çš„æ¯”ä¾‹ |
| ä»»åŠ¡å®Œæˆç‡ | â‰¥ 60% | åˆ›å»ºåæœ€ç»ˆæ ‡è®°å®Œæˆçš„æ¯”ä¾‹ |
| ç”¨æˆ·ç¡®è®¤æ‰“æ–­ç‡ | â‰¤ 15% | éœ€è¦æ˜¾å¼ç¡®è®¤çš„ä»»åŠ¡æ¯”ä¾‹ |

#### æŠ€æœ¯æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹å¼ |
|------|--------|----------|
| å®¢æˆ·ç«¯å´©æºƒç‡ | < 0.1% | å´©æºƒæ¬¡æ•°/ä¼šè¯æ•° |
| APIæˆåŠŸç‡ | â‰¥ 99.5% | æœåŠ¡ç«¯æ¥å£æˆåŠŸå“åº”ç‡ |
| SSEè¿æ¥ç¨³å®šæ€§ | > 99% | 24å°æ—¶ä¸æ–­çº¿æ¯”ä¾‹ |
| æ•°æ®å¯¼å‡ºæˆåŠŸç‡ | 100% | å¯¼å‡ºæ“ä½œæˆåŠŸæ¯”ä¾‹ |
| æ•°æ®æ“¦é™¤å®Œæ•´æ€§ | 100% | æ“¦é™¤åæ— æ®‹ç•™æ•°æ® |

### 10.2 åœºæ™¯éªŒæ”¶

#### åœºæ™¯Aï¼šç¢ç‰‡æ—¶é—´å¿«é€Ÿå§”æ‰˜

| éªŒæ”¶é¡¹ | éªŒæ”¶æ ‡å‡† |
|--------|----------|
| å¯åŠ¨é€Ÿåº¦ | ä»æ¡Œé¢å›¾æ ‡åˆ°å¯æ“ä½œç•Œé¢ < 2s |
| å§”æ‰˜æµç¨‹ | è¾“å…¥"æŸ¥å¿«é€’123456" â†’ è‡ªåŠ¨åˆ›å»ºä»»åŠ¡ â†’ è¿›å…¥æ‰§è¡Œ â‰¤ 3s |
| å½’å±å‡†ç¡®æ€§ | 90%æƒ…å†µä¸‹æ— éœ€ç”¨æˆ·é€‰æ‹©æˆ–ç¡®è®¤ä»»åŠ¡ç±»å‹ |
| å•æ‰‹æ“ä½œ | è¾“å…¥ã€å‘é€ã€æŸ¥çœ‹ç»“æœå…¨ç¨‹å•æ‰‹å®Œæˆ |

**æµ‹è¯•æ­¥éª¤**:
1. æ¸…ç†åå°ï¼Œç‚¹å‡»æ¡Œé¢PWAå›¾æ ‡
2. è¾“å…¥"å¸®æˆ‘æŸ¥ä¸€ä¸‹é¡ºä¸°1234567890"
3. è§‚å¯Ÿï¼šæ˜¯å¦è‡ªåŠ¨åˆ›å»ºä»»åŠ¡ã€æ˜¯å¦è¿›å…¥æ‰§è¡ŒçŠ¶æ€
4. éªŒè¯ï¼šå·¦ä¾§Tasksåˆ—è¡¨æ˜¯å¦å‡ºç°æ–°ä»»åŠ¡

#### åœºæ™¯Bï¼šä»»åŠ¡è¿›å±•è¢«åŠ¨æ¥æ”¶

| éªŒæ”¶é¡¹ | éªŒæ”¶æ ‡å‡† |
|--------|----------|
| é€šçŸ¥è§¦å‘ | ä»»åŠ¡çŠ¶æ€å˜æ›´å5så†…æ”¶åˆ°ç³»ç»Ÿé€šçŸ¥ |
| é€šçŸ¥ç‚¹å‡» | ç‚¹å‡»é€šçŸ¥ç›´è¾¾å¯¹åº”ä»»åŠ¡å¯¹è¯ |
| ç»“æœå±•ç¤º | ä»»åŠ¡å®Œæˆåå¯¹è¯å†…å‡ºç°ç»“æœå¡ç‰‡ |
| æœªè¯»æé†’ | Inboxè§’æ ‡æ­£ç¡®æ˜¾ç¤ºæœªè¯»ä»»åŠ¡æ•° |

**æµ‹è¯•æ­¥éª¤**:
1. åˆ›å»ºä¸€ä¸ªè€—æ—¶ä»»åŠ¡ï¼ˆå¦‚"æœç´¢æœ€è¿‘AIæ–°é—»"ï¼‰
2. åˆ‡æ¢åˆ°å…¶ä»–åº”ç”¨
3. ç­‰å¾…ä»»åŠ¡å®Œæˆ
4. éªŒè¯ï¼šæ˜¯å¦æ”¶åˆ°é€šçŸ¥ã€ç‚¹å‡»æ˜¯å¦ç›´è¾¾ã€ç»“æœæ˜¯å¦æ­£ç¡®æ˜¾ç¤º

#### åœºæ™¯Cï¼šå†å²ä»»åŠ¡è¿½æº¯ä¸å¯¼å‡º

| éªŒæ”¶é¡¹ | éªŒæ”¶æ ‡å‡† |
|--------|----------|
| ä»»åŠ¡åˆ—è¡¨ | å¯æŒ‰æ—¶é—´ã€çŠ¶æ€ç­›é€‰ä»»åŠ¡ |
| å¯¼å‡ºåŠŸèƒ½ | é€‰æ‹©æ—¶é—´èŒƒå›´ â†’ å¯¼å‡ºJSON â†’ æ–‡ä»¶å¯ä¸‹è½½ |
| æ•°æ®å®Œæ•´æ€§ | å¯¼å‡ºæ–‡ä»¶åŒ…å«ä»»åŠ¡ã€æ¶ˆæ¯ã€æ›´æ–°è®°å½• |
| æ“¦é™¤åŠŸèƒ½ | ä¸€é”®æ“¦é™¤åï¼Œæœ¬åœ°æ— æ®‹ç•™ä»»åŠ¡æ•°æ® |
| åŠ å¯†é€‰é¡¹ | å¯¼å‡ºæ”¯æŒå¯†ç åŠ å¯†ï¼Œå¯¼å…¥éœ€å¯†ç è§£å¯† |

**æµ‹è¯•æ­¥éª¤**:
1. åˆ›å»ºå‡ ä¸ªæµ‹è¯•ä»»åŠ¡å¹¶äº§ç”Ÿæ¶ˆæ¯
2. è¿›å…¥è®¾ç½® â†’ æ•°æ®ç®¡ç† â†’ å¯¼å‡º
3. é€‰æ‹©æ—¶é—´èŒƒå›´ï¼Œå‹¾é€‰åŠ å¯†ï¼Œè®¾ç½®å¯†ç 
4. ä¸‹è½½æ–‡ä»¶ï¼ŒéªŒè¯JSONæ ¼å¼å’Œå®Œæ•´æ€§
5. æ‰§è¡Œæ“¦é™¤ï¼ŒéªŒè¯ä»»åŠ¡åˆ—è¡¨ä¸ºç©º
6. å°è¯•å¯¼å…¥åˆšæ‰çš„æ–‡ä»¶ï¼ŒéªŒè¯æ•°æ®æ¢å¤

### 10.3 å®‰å…¨éªŒæ”¶

| éªŒæ”¶é¡¹ | éªŒæ”¶æ ‡å‡† |
|--------|----------|
| å·¥å…·ç™½åå• | éç™½åå•å·¥å…·è°ƒç”¨è¢«æ‹¦æˆª |
| é«˜å±ç¡®è®¤ | `rm -rf`ç±»å‘½ä»¤è§¦å‘äºŒæ¬¡ç¡®è®¤ |
| è·¯å¾„é™åˆ¶ | è¶…å‡ºå…è®¸è·¯å¾„çš„æ–‡ä»¶æ“ä½œè¢«æ‹’ç» |
| æ•°æ®åŠ å¯† | æœ¬åœ°DBåŠ å¯†ï¼Œå¯¼å‡ºæ–‡ä»¶å¯é€‰åŠ å¯† |
| æ“¦é™¤å®‰å…¨ | æ“¦é™¤æ“ä½œè¦†ç›–å†™å…¥ååˆ é™¤ |

### 10.4 å…¼å®¹æ€§éªŒæ”¶

| å¹³å° | æµè§ˆå™¨ | éªŒæ”¶æ ‡å‡† |
|------|--------|----------|
| iOS | Safari 16+ | æ‰€æœ‰P0åŠŸèƒ½æ­£å¸¸ï¼ŒPWAå¯å®‰è£… |
| Android | Chrome 110+ | æ‰€æœ‰P0åŠŸèƒ½æ­£å¸¸ï¼ŒPWAå¯å®‰è£… |
| Android | Samsung Internet | æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸ |

---

## é™„å½•

### A. æœ¯è¯­è¡¨

| æœ¯è¯­ | è¯´æ˜ |
|------|------|
| Task | ç”¨æˆ·å§”æ‰˜çš„å…·ä½“ä»»åŠ¡é¡¹ |
| Update | Agentäº§ç”Ÿçš„è¿›å±•æ›´æ–°æˆ–æ‰§è¡Œäº§ç‰© |
| Adapter | è¿æ¥ç‰¹å®šæ‰§è¡Œåç«¯çš„é€‚é…å™¨ï¼ˆå¦‚OpenClawï¼‰ |
| Intent | ç”¨æˆ·æ„å›¾æ ‡ç­¾ï¼ˆå¦‚file_operationï¼‰ |
| Confidence | æ„å›¾åŒ¹é…ç½®ä¿¡åº¦ï¼Œ0-1ä¹‹é—´ |
| SSE | Server-Sent Eventsï¼ŒæœåŠ¡ç«¯æ¨é€æŠ€æœ¯ |
| PWA | Progressive Web Appï¼Œæ¸è¿›å¼Webåº”ç”¨ |

### B. æ•°æ®å­—å…¸

**TaskçŠ¶æ€æµè½¬**:
```
pending â†’ running â†’ completed
   â†“         â†“
cancelled  failed â†’ retry â†’ running
```

**ä¼˜å…ˆçº§å®šä¹‰**:
- P0 (0): ç´§æ€¥ï¼Œç«‹å³å¤„ç†
- P1 (1): æ™®é€šï¼Œæ­£å¸¸å¤„ç†
- P2 (2): ä½ï¼Œç©ºé—²æ—¶å¤„ç†

**Messageç±»å‹**:
- text: çº¯æ–‡æœ¬æ¶ˆæ¯
- card: ç»“æ„åŒ–å¡ç‰‡ï¼ˆç¡®è®¤å¡ç‰‡ã€ä»»åŠ¡å¡ç‰‡ç­‰ï¼‰
- task_created: ä»»åŠ¡åˆ›å»ºç³»ç»Ÿæ¶ˆæ¯
- task_update: ä»»åŠ¡æ›´æ–°ç³»ç»Ÿæ¶ˆæ¯

### C. å‚è€ƒèµ„æ–™

- PRDè‰æ¡ˆ: `PRD-Agent-Communication-Platform-MVP.md`
- æ¶æ„è¯„å®¡: `agent-platform-arch-review.md`
- OpenClaw Gateway APIæ–‡æ¡£

---

*æ–‡æ¡£ç»“æŸ | å¯ç›´æ¥ç”¨äºClaude Codeå¼€å‘è¾“å…¥*
