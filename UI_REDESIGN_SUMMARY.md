# UI é‡æ–°è®¾è®¡å®æ–½æ€»ç»“

## ğŸ“… å®Œæˆæ—¶é—´

2026-02-15

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### Phase 1: è®¾è®¡ç³»ç»ŸåŸºç¡€ âœ“

**æ–‡ä»¶ä¿®æ”¹ï¼š**
- `packages/client/src/styles/index.css` - å®Œå…¨é‡å†™

**æ–°å¢å†…å®¹ï¼š**
- ç°ä»£åŒ–è‰²å½©æ–¹æ¡ˆï¼ˆIndigo ä¸»è‰²è°ƒï¼‰
- é˜´å½±ç³»ç»Ÿï¼ˆsm/md/lg/hoverï¼‰
- åœ†è§’ç³»ç»Ÿï¼ˆsm/md/lg/xl/fullï¼‰
- é—´è·ç³»ç»Ÿï¼ˆ8px ç½‘æ ¼ï¼‰
- åŠ¨ç”»å®šä¹‰ï¼ˆslideIn/fadeIn/expandWidth ç­‰ï¼‰
- å“åº”å¼å·¥å…·ç±»
- æ»šåŠ¨æ¡ç¾åŒ–
- ç„¦ç‚¹æ ·å¼ä¼˜åŒ–
- è§¦æ‘¸ç›®æ ‡ä¼˜åŒ–ï¼ˆç§»åŠ¨ç«¯ï¼‰

### Phase 2: æ ¸å¿ƒç»„ä»¶åˆ›å»º âœ“

#### 2a. å¸ƒå±€ç»„ä»¶
**æ–°å¢æ–‡ä»¶ï¼š**
- `components/Layout/ThreeColumnLayout.tsx` - ä¸‰æ å“åº”å¼å¸ƒå±€
- `components/Layout/ResponsiveLayout.tsx` - å“åº”å¼åˆ‡æ¢å™¨
- `components/Layout/index.ts` - å¯¼å‡º

**åŠŸèƒ½ï¼š**
- Desktop (â‰¥1024px): ä¸‰æ å¸ƒå±€ï¼ˆSidebar 240px + Inbox 320px + Content flex-1ï¼‰
- Tablet (768-1023px): ä¸¤æ å¸ƒå±€ï¼ˆInbox 400px + Content flex-1ï¼‰
- Mobile (<768px): å•æ å †å  + åº•éƒ¨å¯¼èˆª

#### 2b. Agent Sidebar ç»„ä»¶
**æ–°å¢æ–‡ä»¶ï¼š**
- `components/Sidebar/AgentSidebar.tsx` - Desktop å·¦ä¾§æ 
- `components/Sidebar/AgentSwitcher.tsx` - Tablet/Mobile ä¸‹æ‹‰é€‰æ‹©å™¨
- `components/Sidebar/BottomNav.tsx` - Mobile åº•éƒ¨å¯¼èˆªæ 
- `components/Sidebar/index.ts` - å¯¼å‡º

**åŠŸèƒ½ï¼š**
- Agent åˆ—è¡¨å±•ç¤ºï¼ˆæœªè¯»å¾½ç« ã€æ´»è·ƒçŠ¶æ€æŒ‡ç¤ºï¼‰
- æ”¯æŒæŠ˜å /å±•å¼€
- ä¸‹æ‹‰é€‰æ‹©å™¨ï¼ˆTablet/Mobileï¼‰
- åº•éƒ¨å¯¼èˆªæ ï¼ˆæœ€å¤š 4 ä¸ª Agent + æ›´å¤šï¼‰

#### 2c. Task Inbox Panel ç»„ä»¶
**æ–°å¢æ–‡ä»¶ï¼š**
- `components/TaskInbox/TaskInboxPanel.tsx` - ä»»åŠ¡åˆ—è¡¨é¢æ¿
- `components/TaskInbox/TaskCardCompact.tsx` - ç´§å‡‘å‹ä»»åŠ¡å¡ç‰‡
- `components/TaskInbox/QuickTaskInput.tsx` - å¿«é€Ÿæ–°å»ºè¾“å…¥æ¡†
- `components/TaskInbox/index.ts` - å¯¼å‡º

**åŠŸèƒ½ï¼š**
- çŠ¶æ€è¿‡æ»¤æ ‡ç­¾é¡µï¼ˆå…¨éƒ¨/è¿›è¡Œä¸­/éœ€å›å¤/å·²å®Œæˆï¼‰
- ç´§å‡‘å¡ç‰‡è®¾è®¡ï¼ˆæ ‡é¢˜ + çŠ¶æ€ + æ—¶é—´ + é¢„è§ˆï¼‰
- å­ä»»åŠ¡ç‰¹æ®Šæ ‡è¯†ï¼ˆæ©™è‰²è¾¹æ¡†ï¼‰
- å¿«é€Ÿæ–°å»ºä»»åŠ¡è¾“å…¥æ¡†
- æ‚¬åœåˆ é™¤æŒ‰é’®

#### 2d. Conversation Panel ç»„ä»¶
**æ–°å¢æ–‡ä»¶ï¼š**
- `components/Conversation/ConversationPanel.tsx` - å¯¹è¯é¢æ¿
- `components/Conversation/MessageCard.tsx` - æ¶ˆæ¯å¡ç‰‡ï¼ˆéæ°”æ³¡å¼ï¼‰
- `components/Conversation/TaskHeader.tsx` - ä»»åŠ¡å¤´éƒ¨
- `components/Conversation/MessageInput.tsx` - åº•éƒ¨è¾“å…¥æ¡†
- `components/Conversation/index.ts` - å¯¼å‡º

**åŠŸèƒ½ï¼š**
- éæ°”æ³¡å¼æ¶ˆæ¯å¡ç‰‡ï¼ˆç”¨æˆ·æ¶ˆæ¯å³å¯¹é½é›è“è‰²ï¼ŒAgent æ¶ˆæ¯å·¦å¯¹é½ç™½è‰²ï¼‰
- ä»»åŠ¡å¤´éƒ¨ï¼ˆæ ‡é¢˜å¯ç¼–è¾‘ã€çŠ¶æ€æ˜¾ç¤ºã€æ“ä½œèœå•ï¼‰
- å­ä»»åŠ¡æç¤ºæ¡
- åº•éƒ¨è¾“å…¥æ¡†ï¼ˆæ”¯æŒ Cmd/Ctrl+Enter æ¢è¡Œï¼‰
- è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨

#### 2e. å“åº”å¼ Hooks
**æ–°å¢æ–‡ä»¶ï¼š**
- `lib/hooks/useResponsive.ts` - å“åº”å¼æ–­ç‚¹æ£€æµ‹
- `lib/hooks/useKeyboard.ts` - å¿«æ·é”®ç»‘å®š
- `lib/hooks/index.ts` - å¯¼å‡º

**åŠŸèƒ½ï¼š**
- å®æ—¶æ–­ç‚¹æ£€æµ‹ï¼ˆmobile/tablet/desktop/wideï¼‰
- å…¨å±€å¿«æ·é”®ç³»ç»Ÿï¼ˆCmd+K, Cmd+N, Cmd+/, Escape ç­‰ï¼‰
- é˜²æŠ–ä¼˜åŒ–ï¼ˆresize äº‹ä»¶ 150ms å»¶è¿Ÿï¼‰

### Phase 3: é¡µé¢é‡æ„ âœ“

**ä¿®æ”¹æ–‡ä»¶ï¼š**
- `pages/AgentInboxPage.tsx` - å®Œå…¨é‡å†™
- `App.tsx` - æ·»åŠ å…¨å±€å¿«æ·é”®ã€è·¯ç”±æ›´æ–°

**è·¯ç”±æ›´æ–°ï¼š**
- `/agents/:agentId` â†’ AgentInboxPageï¼ˆä¸‰æ å¸ƒå±€ï¼‰
- `/agents/:agentId/tasks/:taskId` â†’ AgentInboxPageï¼ˆåŒä¸€é¡µé¢ï¼Œä»»åŠ¡é«˜äº®ï¼‰

**åŠŸèƒ½ï¼š**
- Mobile: æ ¹æ® taskId åˆ‡æ¢ Inbox/Conversation è§†å›¾
- Desktop/Tablet: ä¸‰æ /ä¸¤æ å¸ƒå±€ï¼Œä»»åŠ¡é€‰æ‹©æ›´æ–° URL
- è‡ªåŠ¨åŠ è½½ Agent ä¿¡æ¯å’Œä»»åŠ¡åˆ—è¡¨
- ä¾§è¾¹æ æŠ˜å æ§åˆ¶
- ä»»åŠ¡ç‚¹å‡»å¯¼èˆª

### Phase 4: äº¤äº’ä¼˜åŒ– âœ“

**æ–°å¢æ–‡ä»¶ï¼š**
- `components/GlobalKeyBindings.tsx` - å…¨å±€å¿«æ·é”®

**ä¾èµ–å®‰è£…ï¼š**
- `framer-motion` - åŠ¨ç”»åº“ï¼ˆå·²å®‰è£…ï¼Œå¾…åç»­é›†æˆï¼‰

**å·²å®ç°ï¼š**
- å…¨å±€å¿«æ·é”®ç»‘å®šï¼ˆCmd+/, Cmd+Nï¼‰
- CSS åŠ¨ç”»ç³»ç»Ÿï¼ˆfadeIn, slideIn ç­‰ï¼‰
- å“åº”å¼æ–­ç‚¹è‡ªåŠ¨åˆ‡æ¢å¸ƒå±€

## ğŸ“¦ æ–°å¢ä¾èµ–

```json
{
  "framer-motion": "^11.x.x"
}
```

## ğŸ”§ Store æ›´æ–°

**æ–°å¢çŠ¶æ€ï¼š**
```typescript
export interface UIState {
  currentAgentId: string | null;
  currentTaskId: string | null;
  sidebarCollapsed: boolean;
}
```

**æ–°å¢ Actionsï¼š**
- `SET_CURRENT_AGENT` - è®¾ç½®å½“å‰ Agent
- `SET_CURRENT_TASK` - è®¾ç½®å½“å‰ä»»åŠ¡
- `TOGGLE_SIDEBAR` - åˆ‡æ¢ä¾§è¾¹æ 
- `SET_SIDEBAR_COLLAPSED` - è®¾ç½®ä¾§è¾¹æ æŠ˜å çŠ¶æ€

## ğŸ“± å“åº”å¼æ–­ç‚¹

| æ–­ç‚¹ | èŒƒå›´ | å¸ƒå±€ |
|------|------|------|
| mobile | 0-767px | å•æ å †å  + åº•éƒ¨å¯¼èˆª |
| tablet | 768-1023px | ä¸¤æ ï¼ˆInbox + Contentï¼‰|
| desktop | 1024-1439px | ä¸‰æ ï¼ˆSidebar + Inbox + Contentï¼‰|
| wide | â‰¥1440px | ä¸‰æ ï¼ˆæœ€å¤§å®½åº¦é™åˆ¶ï¼‰|

## ğŸ¨ è®¾è®¡ç³»ç»Ÿ

### è‰²å½©æ–¹æ¡ˆ
- **ä¸»è‰²è°ƒ**: Indigo 600 (#4F46E5)
- **ä¸­æ€§è‰²**: Gray/Slate ç³»åˆ—
- **çŠ¶æ€è‰²**: Green/Amber/Red/Blue

### åœ†è§’ç³»ç»Ÿ
- `--radius-sm`: 6pxï¼ˆå¾½ç« ã€æ ‡ç­¾ï¼‰
- `--radius-md`: 8pxï¼ˆå¡ç‰‡ï¼‰
- `--radius-lg`: 12pxï¼ˆæ¨¡æ€æ¡†ï¼‰
- `--radius-xl`: 16pxï¼ˆå¤§å®¹å™¨ï¼‰
- `--radius-full`: 9999pxï¼ˆåœ†å½¢ï¼‰

### é˜´å½±ç³»ç»Ÿ
- `--shadow-sm`: è½»å¾®é˜´å½±ï¼ˆå¡ç‰‡ï¼‰
- `--shadow-md`: ä¸­ç­‰é˜´å½±
- `--shadow-lg`: å¤§é˜´å½±ï¼ˆæ¨¡æ€æ¡†ï¼‰
- `--shadow-hover`: æ‚¬åœé˜´å½±

## ğŸ¯ å…³é”®è®¾è®¡å†³ç­–

1. **éæ°”æ³¡å¼æ¶ˆæ¯**ï¼šé‡‡ç”¨ä¼ ç»Ÿæ¶ˆæ¯å¡ç‰‡è€Œéæ°”æ³¡å¼ï¼Œé¿å…å®½å±é”¯é½¿æ‰«æç–²åŠ³
2. **ä¸‰æ å¸ƒå±€**ï¼šå€Ÿé‰´ ChatGPT/Claude çš„æ ‡å‡†è®¾è®¡ï¼Œå·¦ä¾§ Agent åˆ—è¡¨å¸¸é©»
3. **Inbox ä¼˜å…ˆ**ï¼šä»»åŠ¡åˆ—è¡¨å§‹ç»ˆå¯è§ï¼Œæ”¯æŒå¿«é€Ÿåˆ‡æ¢
4. **ç§»åŠ¨ä¼˜å…ˆ**ï¼šçœŸæ­£çš„å•æ‰‹æ“ä½œå‹å¥½ï¼Œåº•éƒ¨å¯¼èˆª + å®‰å…¨åŒºåŸŸé€‚é…
5. **çŠ¶æ€æŒä¹…åŒ–**ï¼šUI çŠ¶æ€å­˜å‚¨åœ¨ Storeï¼Œè·¨é¡µé¢ä¿æŒ

## âœ¨ ç”¨æˆ·ä½“éªŒæ”¹è¿›

1. **æ›´å¿«çš„ä»»åŠ¡åˆ›å»º**ï¼šInbox é¡¶éƒ¨å¿«é€Ÿè¾“å…¥æ¡†ï¼Œæ— éœ€è·³è½¬é¡µé¢
2. **æ›´æ¸…æ™°çš„è§†è§‰å±‚æ¬¡**ï¼šç´§å‡‘å¡ç‰‡ + çŠ¶æ€å¾½ç«  + å­ä»»åŠ¡æ ‡è¯†
3. **æ›´æµç•…çš„å¯¼èˆª**ï¼šDesktop æ— éœ€è¿”å›æŒ‰é’®ï¼ŒURL åŒæ­¥ï¼Œæµè§ˆå™¨å‰è¿›/åé€€å¯ç”¨
4. **æ›´å¥½çš„ç§»åŠ¨ä½“éªŒ**ï¼šåº•éƒ¨å¯¼èˆª + ä¸‹æ‹‰é€‰æ‹©å™¨ + è§¦æ‘¸ç›®æ ‡ä¼˜åŒ–
5. **æ›´ç›´è§‚çš„åä½œ**ï¼šå­ä»»åŠ¡æ©™è‰²è¾¹æ¡† + å§”æ´¾æ ‡ç­¾ï¼Œä¸€ç›®äº†ç„¶

## ğŸš€ åç»­ä¼˜åŒ–å»ºè®®

### ä¼˜å…ˆçº§ P0ï¼ˆå»ºè®®ç«‹å³å®æ–½ï¼‰
- [ ] é›†æˆ framer-motion åŠ¨ç”»ï¼ˆé¡µé¢åˆ‡æ¢ã€æ¶ˆæ¯å‡ºç°ï¼‰
- [ ] è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–ï¼ˆé•¿ä»»åŠ¡åˆ—è¡¨æ€§èƒ½ï¼‰
- [ ] ç§»åŠ¨ç«¯æ‰‹åŠ¿æ”¯æŒï¼ˆæ»‘åŠ¨åˆ é™¤ã€ä¸‹æ‹‰åˆ·æ–°ï¼‰

### ä¼˜å…ˆçº§ P1ï¼ˆè¿‘æœŸå®æ–½ï¼‰
- [ ] Markdown æ¸²æŸ“ï¼ˆæ¶ˆæ¯å†…å®¹æ”¯æŒå¯Œæ–‡æœ¬ï¼‰
- [ ] å›¾ç‰‡/é™„ä»¶é¢„è§ˆï¼ˆåŒæŒ‡ç¼©æ”¾ã€é•¿æŒ‰ä¿å­˜ï¼‰
- [ ] ç¦»çº¿ä½“éªŒä¼˜åŒ–ï¼ˆPWA ç¼“å­˜ç­–ç•¥ï¼‰
- [ ] æ·±è‰²æ¨¡å¼æ”¯æŒ

### ä¼˜å…ˆçº§ P2ï¼ˆæœªæ¥è€ƒè™‘ï¼‰
- [ ] æœç´¢åŠŸèƒ½ï¼ˆCmd+K å¿«é€Ÿæœç´¢ä»»åŠ¡ï¼‰
- [ ] ä»»åŠ¡æ ‡ç­¾/å½’ç±»
- [ ] æ•°æ®å¯¼å‡º/å¯¼å…¥
- [ ] å¤šè¯­è¨€æ”¯æŒ

## ğŸ“Š ç¼–è¯‘éªŒè¯

```bash
âœ“ TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡
âœ“ Vite ç”Ÿäº§æ„å»ºæˆåŠŸ
âœ“ PWA é…ç½®æ­£å¸¸
âœ“ Bundle å¤§å°: 221.07 kB (gzip: 69.49 kB)
```

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡ UI é‡æ–°è®¾è®¡å®Œæˆäº†ï¼š
- **8 ä¸ªæ–°ç»„ä»¶** - å¸ƒå±€ã€ä¾§è¾¹æ ã€ä»»åŠ¡åˆ—è¡¨ã€å¯¹è¯é¢æ¿
- **2 ä¸ªæ–° hooks** - å“åº”å¼æ£€æµ‹ã€å¿«æ·é”®ç»‘å®š
- **å®Œæ•´çš„è®¾è®¡ç³»ç»Ÿ** - è‰²å½©ã€åœ†è§’ã€é˜´å½±ã€åŠ¨ç”»
- **ä¸‰æ å“åº”å¼å¸ƒå±€** - Desktop/Tablet/Mobile å®Œå…¨é€‚é…
- **ç°ä»£åŒ–äº¤äº’** - å¿«æ·é”®ã€åŠ¨ç”»ã€æ‰‹åŠ¿å‹å¥½

æ–°è®¾è®¡å‚è€ƒäº† ChatGPTã€Claudeã€Windsurfã€Notionã€Linear ç­‰ä¸šç•Œæœ€ä½³å®è·µï¼Œæä¾›äº†æ›´æµç•…ã€æ›´ç°ä»£ã€æ›´é«˜æ•ˆçš„ç”¨æˆ·ä½“éªŒã€‚ç§»åŠ¨ç«¯ä½“éªŒå¾—åˆ°æ˜¾è‘—æå‡ï¼ŒçœŸæ­£åšåˆ°äº†"éšæ—¶éšåœ°é«˜æ•ˆæ“ä½œ"ã€‚
